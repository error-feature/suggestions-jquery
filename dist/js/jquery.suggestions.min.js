/**
 * DaData.ru Suggestions jQuery plugin, version 15.8.1
 *
 * DaData.ru Suggestions jQuery plugin is freely distributable under the terms of MIT-style license
 * Built on DevBridge Autocomplete for jQuery (https://github.com/devbridge/jQuery-Autocomplete)
 * For details, see https://github.com/hflabs/suggestions-jquery
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e,n=13,s=27,i=9,o=32,a=38,r=40,u={},c=".suggestions",l="\\s\"'~\\*\\.,:\\|\\[\\]\\(\\)\\{\\}<>№",h=new RegExp("["+l+"]+","g"),d=new RegExp("[\\-\\+\\/\\\\\\?!@#$%^&]+","g"),p={autoSelectFirst:!1,serviceUrl:null,onSearchStart:t.noop,onSearchComplete:t.noop,onSearchError:t.noop,onSelect:null,onSelectNothing:null,onInvalidateSelection:null,minChars:1,deferRequestBy:100,params:{},paramName:"query",timeout:3e3,formatResult:null,formatSelected:null,noCache:!1,containerClass:"suggestions-suggestions",tabDisabled:!1,triggerSelectOnSpace:!1,triggerSelectOnEnter:!0,triggerSelectOnBlur:!0,preventBadQueries:!1,hint:"Выберите вариант или продолжите ввод",type:null,count:5,$helpers:null,headers:null,scrollOnFocus:!0,mobileWidth:980},g={chains:{},on:function(t,e){return this.get(t).push(e),this},get:function(t){var e=this.chains;return e[t]||(e[t]=[])}},f=(e=0,{escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},escapeHtml:function(e){return e&&t.each({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},function(t,n){e=e.replace(new RegExp(t,"g"),n)}),e},getDefaultType:function(){return t.support.cors?"POST":"GET"},getDefaultContentType:function(){return t.support.cors?"application/json":"application/x-www-form-urlencoded"},fixURLProtocol:function(e){return t.support.cors?e:e.replace(/^https?:/,location.protocol)},addUrlParams:function(e,n){return e+(/\?/.test(e)?"&":"?")+t.param(n)},serialize:function(e){return t.support.cors?JSON.stringify(e):t.param(e,!0)},compact:function(e){return t.grep(e,function(t){return!!t})},delay:function(t,e){return setTimeout(t,e||0)},uniqueId:function(t){return(t||"")+ ++e},slice:function(t,e){return Array.prototype.slice.call(t,e)},areSame:function e(n,s){var i=!0;return typeof n==typeof s&&("object"==typeof n&&null!=n&&null!=s?(t.each(n,function(t,n){return i=e(n,s[t])}),i):n===s)},arrayMinus:function(e,n){return n?t.grep(e,function(e,s){return-1===t.inArray(e,n)}):e},getWords:function(t,e){t=t.replace(/(\d+)([а-яА-ЯёЁ]{2,})/g,"$1 $2").replace(/([а-яА-ЯёЁ]+)(\d+)/g,"$1 $2");var n=this.compact(t.split(h)),s=n.pop(),i=this.arrayMinus(n,e);return i.push(s),i},normalize:function(t,e){return this.getWords(t,e).join(" ")},stringEncloses:function(t,e){return t.length>e.length&&-1!==t.indexOf(e)},fieldsNotEmpty:function(e,n){if(!t.isPlainObject(e))return!1;var s=!0;return t.each(n,function(t,n){return s=!!e[n]}),s},getDeepValue:function t(e,n){var s=n.split("."),i=s.shift();return e&&(s.length?t(e[i],s.join(".")):e[i])},reWordExtractor:function(){return new RegExp("([^"+l+"]*)(["+l+"]*)","g")},formatToken:function(t){return t&&t.toLowerCase().replace(/[ёЁ]/g,"е")},withSubTokens:function(e){var n=[];return t.each(e,function(t,e){var s=e.split(d);n.push(e),s.length>1&&(n=n.concat(f.compact(s)))}),n}}),m=function(){function e(e){return function(n){if(0===n.length)return!1;if(1===n.length)return!0;var s=e(n[0].value);return 0===t.grep(n,function(t){return 0===e(t.value).indexOf(s)},!0).length}}function n(e){return function(n,s){var i,o=this&&this.stopwords,a=n.toLowerCase(),r=-1;return e(s)&&(i=f.withSubTokens(f.getWords(a,o)),t.each(s,function(t,e){var n=e.value.toLowerCase();if(f.stringEncloses(a,n))return!1;var s=f.withSubTokens(f.getWords(n,o));return 0===f.arrayMinus(i,s).length?(r=t,!1):void 0})),r}}var s=e(function(t){return t}),i=e(function(t){return t.replace(/, (?:д|вл|двлд|к) .+$/,"")});return{matchByNormalizedQuery:function(e,n){var s=e.toLowerCase(),i=this&&this.stopwords,o=f.normalize(s,i),a=[];return t.each(n,function(t,e){var n=e.value.toLowerCase();return!f.stringEncloses(s,n)&&(!(n.indexOf(o)>0)&&void(o===f.normalize(n,i)&&a.push(t)))}),1==a.length?a[0]:-1},matchByWords:n(s),matchByWordsAddress:n(i),matchByFields:function(e,n){var s=this&&this.stopwords,i=this&&this.fieldsStopwords,o=f.withSubTokens(f.getWords(e.toLowerCase(),s)),a=[];return 1===n.length&&(i&&t.each(i,function(t,e){var s=f.getDeepValue(n[0],t),i=s&&f.withSubTokens(f.getWords(s.toLowerCase(),e));i&&i.length&&(a=a.concat(i))}),0===f.arrayMinus(o,a).length)?0:-1}}}();!function(){var e=["ао","аобл","дом","респ","а/я","аал","автодорога","аллея","арбан","аул","б-р","берег","бугор","вал","вл","волость","въезд","высел","г","городок","гск","д","двлд","днп","дор","дп","ж/д_будка","ж/д_казарм","ж/д_оп","ж/д_платф","ж/д_пост","ж/д_рзд","ж/д_ст","жилзона","жилрайон","жт","заезд","заимка","зона","к","казарма","канал","кв","кв-л","км","кольцо","комн","кордон","коса","кп","край","линия","лпх","м","массив","местность","мкр","мост","н/п","наб","нп","обл","округ","остров","оф","п","п/о","п/р","п/ст","парк","пгт","пер","переезд","пл","пл-ка","платф","погост","полустанок","починок","пр-кт","проезд","промзона","просек","просека","проселок","проток","протока","проулок","р-н","рзд","россия","рп","ряды","с","с/а","с/мо","с/о","с/п","с/с","сад","сквер","сл","снт","спуск","ст","ст-ца","стр","тер","тракт","туп","у","ул","уч-к","ф/х","ферма","х","ш","бульвар","владение","выселки","гаражно-строительный","город","деревня","домовладение","дорога","квартал","километр","комната","корпус","литер","леспромхоз","местечко","микрорайон","набережная","область","переулок","платформа","площадка","площадь","поселение","поселок","проспект","разъезд","район","республика","село","сельсовет","слобода","сооружение","станица","станция","строение","территория","тупик","улица","улус","участок","хутор","шоссе"],n=/<strong>/,s={LEGAL:[2,2,5,1],INDIVIDUAL:[2,2,6,2]};function i(t,e){return n.test(e)&&!n.test(t)?e:t}u.NAME={urlSuffix:"fio",matchers:[m.matchByNormalizedQuery,m.matchByWords],fieldNames:{surname:"фамилия",name:"имя",patronymic:"отчество"},alwaysContinueSelecting:!0,isDataComplete:function(e){var n,s=this.options.params,i=e.data;return t.isFunction(s)&&(s=s.call(this.element,e.value)),s&&s.parts?n=t.map(s.parts,function(t){return t.toLowerCase()}):(n=["surname","name"],function(t,e){var n=t.data&&t.data[e];return n&&new RegExp("^"+f.escapeRegExChars(n)+"(["+l+"]|$)","i").test(t.value)}(e,"surname")&&n.push("patronymic")),f.fieldsNotEmpty(i,n)},composeValue:function(t){return f.compact([t.surname,t.name,t.patronymic]).join(" ")}},u.PROFESSIONS={urlSuffix:"professions",matchers:[m.matchByNormalizedQuery,m.matchByWords],fieldNames:{profession:"должность"},alwaysContinueSelecting:!0,isDataComplete:!0,composeValue:function(t){return f.compact([t.profession]).join(" ")}},u.ADDRESS={urlSuffix:"address",matchers:[t.proxy(m.matchByNormalizedQuery,{stopwords:e}),t.proxy(m.matchByWordsAddress,{stopwords:e})],boundsAvailable:["region","area","city","settlement","street","house"],boundsFields:{region:["region","region_type","region_type_full","region_with_type"],area:["area","area_type","area_type_full","area_with_type"],city:["city","city_type","city_type_full","city_with_type"],settlement:["settlement","settlement_type","settlement_type_full","settlement_with_type"],street:["street","street_type","street_type_full","street_with_type"],house:["house","house_type","house_type_full","block","block_type"]},unformattableTokens:e,enrichmentEnabled:!0,geoEnabled:!0,isDataComplete:function(e){var n=[this.bounds.to||"flat"],s=e.data;return!t.isPlainObject(s)||f.fieldsNotEmpty(s,n)},composeValue:function(t){return f.compact([t.region_with_type||f.compact([t.region,t.region_type]).join(" "),t.area_with_type||f.compact([t.area_type,t.area]).join(" "),t.city_with_type||f.compact([t.city_type,t.city]).join(" "),t.settlement_with_type||f.compact([t.settlement_type,t.settlement]).join(" "),t.street_with_type||f.compact([t.street_type,t.street]).join(" "),f.compact([t.house_type,t.house,t.block_type,t.block]).join(" "),f.compact([t.flat_type,t.flat]).join(" "),t.postal_box?"а/я "+t.postal_box:null]).join(", ")}},u.PARTY={urlSuffix:"party",matchers:[t.proxy(m.matchByFields,{fieldsStopwords:{value:null,"data.address.value":e,"data.inn":null}})],geoEnabled:!0,formatResult:function(t,n,s,o){var a=i(this.type.formatResultInn.call(this,s,n),this.highlightMatches(f.getDeepValue(s.data,"ogrn"),n,s)),r=this.highlightMatches(f.getDeepValue(s.data,"management.name"),n,s),u=f.getDeepValue(s.data,"address.value")||"";return this.isMobile&&((o||(o={})).maxLength=50),t=function(t,e,n,s,o){return i(this.highlightMatches(t,n,s,o),this.highlightMatches(e,n,s,o))}.call(this,t,f.getDeepValue(s.data,"name.latin"),n,s,o),t=this.wrapFormattedValue(t,s),u&&(u=u.replace(/^\d{6}( РОССИЯ)?, /i,""),u=this.isMobile?u.replace(new RegExp("^([^"+l+"]+["+l+"]+[^"+l+"]+).*"),"$1"):this.highlightMatches(u,n,s,{unformattableTokens:e})),(a||u||r)&&(t+='<div class="'+this.classes.subtext+'"><span class="'+this.classes.subtext_inline+'">'+(a||"")+"</span>"+(i(u,r)||"")+"</div>"),t},formatResultInn:function(e,n){var i,o,a=e.data&&e.data.inn,r=s[e.data&&e.data.type],u=/\d/;if(a)return o=this.highlightMatches(a,n,e),r&&(o=o.split(""),i=t.map(r,function(t){for(var e,n="";t&&(e=o.shift());)n+=e,u.test(e)&&t--;return n}),o=i.join('<span class="'+this.classes.subtext_delimiter+'"></span>')+o.join("")),o}},u.EMAIL={urlSuffix:"email",matchers:[m.matchByNormalizedQuery],isQueryRequestable:function(t){return this.options.suggest_local||t.indexOf("@")>=0}},u.BANK={urlSuffix:"bank",matchers:[m.matchByWords],formatResult:function(t,n,s,i){var o=this.highlightMatches(f.getDeepValue(s.data,"bic"),n,s),a=f.getDeepValue(s.data,"address.value")||"";return t=this.highlightMatches(t,n,s,i),t=this.wrapFormattedValue(t,s),a&&(a=a.replace(/^\d{6}( РОССИЯ)?, /i,""),a=this.isMobile?a.replace(new RegExp("^([^"+l+"]+["+l+"]+[^"+l+"]+).*"),"$1"):this.highlightMatches(a,n,s,{unformattableTokens:e})),(o||a)&&(t+='<div class="'+this.classes.subtext+'"><span class="'+this.classes.subtext_inline+'">'+o+"</span>"+a+"</div>"),t},formatSelected:function(t){return f.getDeepValue(t,"data.name.payment")}},t.extend(p,{suggest_local:!0})}();var v,y={suggest:{defaultParams:{type:f.getDefaultType(),dataType:"json",contentType:f.getDefaultContentType()},addTypeInUrl:!0},detectAddressByIp:{defaultParams:{type:"GET",dataType:"json"},addTypeInUrl:!1},status:{defaultParams:{type:"GET",dataType:"json"},addTypeInUrl:!0}};function b(e,n){this.element=e,this.el=t(e),this.suggestions=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.element.value,this.intervalId=0,this.cachedResponse={},this.enrichmentCache={},this.currentRequest=null,this.inputPhase=t.Deferred(),this.fetchPhase=t.Deferred(),this.enrichPhase=t.Deferred(),this.onChangeTimeout=null,this.triggering={},this.$wrapper=null,this.options=t.extend({},p,n),this.classes={hint:"suggestions-hint",mobile:"suggestions-mobile",nowrap:"suggestions-nowrap",selected:"suggestions-selected",suggestion:"suggestions-suggestion",subtext:"suggestions-subtext",subtext_inline:"suggestions-subtext suggestions-subtext_inline",subtext_delimiter:"suggestions-subtext-delimiter",subtext_label:"suggestions-subtext suggestions-subtext_label",removeConstraint:"suggestions-remove",value:"suggestions-value"},this.disabled=!1,this.selection=null,this.$viewport=t(window),this.$body=t(document.body),this.type=null,this.status={},this.setupElement(),this.el.is(":visible")?this.initialize():this.deferInitialization()}b.utils=f,b.defaultOptions=p,b.version="15.8.1",t.Suggestions=b,b.prototype={initialize:function(){this.uniqueId=f.uniqueId("i"),this.createWrapper(),this.notify("initialize"),this.bindWindowEvents(),this.setOptions(),this.fixPosition()},deferInitialization:function(){var t=this,e="mouseover focus keydown",n=function(){t.el.off(e,n),t.enable(),t.initialize()};t.disabled=!0,t.el.on(e,n)},dispose:function(){this.notify("dispose"),this.el.removeData("suggestions").removeClass("suggestions-input"),this.unbindWindowEvents(),this.removeWrapper(),this.el.trigger("suggestions-dispose")},notify:function(e){var n=this,s=f.slice(arguments,1);return t.map(g.get(e),function(t){return t.apply(n,s)})},createWrapper:function(){this.$wrapper=t('<div class="suggestions-wrapper"/>'),this.el.after(this.$wrapper),this.$wrapper.on("mousedown"+c,t.proxy(this.onMousedown,this))},removeWrapper:function(){this.$wrapper&&this.$wrapper.remove(),t(this.options.$helpers).off(c)},onMousedown:function(e){var n=this;e.preventDefault(),n.cancelBlur=!0,f.delay(function(){delete n.cancelBlur}),0==t(e.target).closest(".ui-menu-item").length&&f.delay(function(){t(document).one("mousedown",function(e){var s=n.el.add(n.$wrapper).add(n.options.$helpers);n.options.floating&&(s=s.add(n.$container)),(s=s.filter(function(){return this===e.target||t.contains(this,e.target)})).length||n.hide()})})},bindWindowEvents:function(){var e=t.proxy(this.fixPosition,this);this.$viewport.on("resize"+c+this.uniqueId,e).on("scroll"+c+this.uniqueId,e)},unbindWindowEvents:function(){this.$viewport.off("resize"+c+this.uniqueId).off("scroll"+c+this.uniqueId)},scrollToTop:function(){var e=this.options.scrollOnFocus;!0===e&&(e=this.el),e instanceof t&&e.length>0&&t("body,html").animate({scrollTop:e.offset().top},"fast")},setOptions:function(e){if(t.extend(this.options,e),this.type=u[this.options.type],!this.type)throw this.disable(),"`type` option is incorrect! Must be one of: "+t.map(u,function(t,e){return'"'+e+'"'}).join(", ");t(this.options.$helpers).off(c).on("mousedown"+c,t.proxy(this.onMousedown,this)),this.notify("setOptions")},fixPosition:function(e){var n,s,i={};e&&"scroll"==e.type&&!this.options.floating||(this.$container.appendTo(this.options.floating?this.$body:this.$wrapper),this.isMobile=this.$viewport.width()<=this.options.mobileWidth,this.notify("resetPosition"),this.el.css("paddingLeft",""),this.el.css("paddingRight",""),i.paddingLeft=parseFloat(this.el.css("paddingLeft")),i.paddingRight=parseFloat(this.el.css("paddingRight")),t.extend(i,this.el.offset()),i.borderTop="none"==this.el.css("border-top-style")?0:parseFloat(this.el.css("border-top-width")),i.borderLeft="none"==this.el.css("border-left-style")?0:parseFloat(this.el.css("border-left-width")),i.innerHeight=this.el.innerHeight(),i.innerWidth=this.el.innerWidth(),i.outerHeight=this.el.outerHeight(),i.componentsLeft=0,i.componentsRight=0,n=this.$wrapper.offset(),s={top:i.top-n.top,left:i.left-n.left},this.notify("fixPosition",s,i),i.componentsLeft>i.paddingLeft&&this.el.css("paddingLeft",i.componentsLeft+"px"),i.componentsRight>i.paddingRight&&this.el.css("paddingRight",i.componentsRight+"px"))},clearCache:function(){this.cachedResponse={},this.enrichmentCache={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.selection=null,this.hide(),this.suggestions=[],this.el.val(""),this.el.trigger("suggestions-clear"),this.notify("clear")},disable:function(){this.disabled=!0,this.abortRequest(),this.hide()},enable:function(){this.disabled=!1},isUnavailable:function(){return this.disabled},update:function(){var t=this.el.val();this.isQueryRequestable(t)?(this.currentValue=t,this.updateSuggestions(t)):this.hide()},setSuggestion:function(e){var n,s;t.isPlainObject(e)&&t.isPlainObject(e.data)&&(e=t.extend(!0,{},e),this.bounds.own.length&&(this.checkValueBounds(e),n=this.copyBoundedData(e.data,this.bounds.all),e.data.kladr_id&&(n.kladr_id=this.getBoundedKladrId(e.data.kladr_id,this.bounds.all)),e.data=n),s=this.getSuggestionValue(e)||"",this.currentValue=s,this.el.val(s),this.selection=e,this.suggestions=[e],this.abortRequest())},fixData:function(){var e=this,n=e.extendedCurrentValue(),s=e.el.val(),i=t.Deferred();i.done(function(t){e.selectSuggestion(t,0,s,{hasBeenEnriched:!0})}).fail(function(){e.selection=null,e.currentValue="",e.el.val(e.currentValue)}),e.isQueryRequestable(n)?(e.currentValue=n,e.getSuggestions(n,{count:1,from_bound:null,to_bound:null}).done(function(t){var e=t[0];e?i.resolve(e):i.reject()}).fail(function(){i.reject()})):i.reject()},extendedCurrentValue:function(){var e=this.getParentInstance(),n=e&&e.extendedCurrentValue(),s=t.trim(this.el.val());return f.compact([n,s]).join(" ")},getAjaxParams:function(e,n){var s=t.trim(this.options.token),i=this.options.serviceUrl,o=y[e],a=t.extend({timeout:this.options.timeout},o.defaultParams),r={};return/\/$/.test(i)||(i+="/"),i+=e,o.addTypeInUrl&&(i+="/"+this.type.urlSuffix),i=f.fixURLProtocol(i),t.support.cors?(s&&(r.Authorization="Token "+s),r["X-Version"]=b.version,a.headers||(a.headers={}),t.extend(a.headers,this.options.headers,r)):(s&&(r.token=s),r.version=b.version,i=f.addUrlParams(i,r)),a.url=i,t.extend(a,n)},isQueryRequestable:function(t){var e;return(e=t.length>=this.options.minChars)&&this.type.isQueryRequestable&&(e=this.type.isQueryRequestable.call(this,t)),e},constructRequestParams:function(e,n){var s=this.options,i=t.isFunction(s.params)?s.params.call(this.element,e):t.extend({},s.params);return this.type.constructRequestParams&&t.extend(i,this.type.constructRequestParams.call(this)),t.each(this.notify("requestParams"),function(e,n){t.extend(i,n)}),i[s.paramName]=e,t.isNumeric(s.count)&&s.count>0&&(i.count=s.count),t.extend(i,n)},updateSuggestions:function(t){var e=this;e.fetchPhase=e.getSuggestions(t).done(function(n){e.assignSuggestions(n,t)})},getSuggestions:function(e,n,s){var i,o=this,a=o.options,r=s&&s.noCallbacks,u=s&&s.useEnrichmentCache,c=o.constructRequestParams(e,n),l=t.param(c||{}),h=t.Deferred();return(i=o.cachedResponse[l])&&t.isArray(i.suggestions)?h.resolve(i.suggestions):o.isBadQuery(e)?h.reject():r||!1!==a.onSearchStart.call(o.element,c)?o.doGetSuggestions(c).done(function(t){o.processResponse(t)&&e==o.currentValue?(a.noCache||(u?o.enrichmentCache[e]=t.suggestions[0]:(o.enrichResponse(t,e),o.cachedResponse[l]=t,a.preventBadQueries&&0===t.suggestions.length&&o.badQueries.push(e))),h.resolve(t.suggestions)):h.reject(),r||a.onSearchComplete.call(o.element,e,t.suggestions)}).fail(function(t,n,s){h.reject(),r||"abort"===n||a.onSearchError.call(o.element,e,t,n,s)}):h.reject(),h},doGetSuggestions:function(e){var n=this,s=t.ajax(n.getAjaxParams("suggest",{data:f.serialize(e)}));return n.abortRequest(),n.currentRequest=s,n.notify("request"),s.always(function(){n.currentRequest=null,n.notify("request")}),s},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;var n=!1;return t.each(this.badQueries,function(t,s){return!(n=0===e.indexOf(s))}),n},abortRequest:function(){this.currentRequest&&this.currentRequest.abort()},processResponse:function(e){return!(!e||!t.isArray(e.suggestions))&&(this.verifySuggestionsFormat(e.suggestions),this.setUnrestrictedValues(e.suggestions),!0)},verifySuggestionsFormat:function(e){"string"==typeof e[0]&&t.each(e,function(t,n){e[t]={value:n,data:null}})},getSuggestionValue:function(e){var n,s=this.options.formatSelected||this.type.formatSelected;return t.isFunction(s)&&(n=s.call(this,e)),"string"==typeof n&&0!=n.length||(n=e.value),n},assignSuggestions:function(t,e){this.suggestions=t,this.notify("assignSuggestions",e)},shouldRestrictValues:function(){return this.options.restrict_value&&this.constraints&&1==Object.keys(this.constraints).length},setUnrestrictedValues:function(e){var n=this.shouldRestrictValues(),s=this.getFirstConstraintLabel();t.each(e,function(t,e){e.unrestricted_value=n?s+", "+e.value:e.value})},areSuggestionsSame:function(t,e){return t&&e&&t.value===e.value&&f.areSame(t.data,e.data)}},v={setupElement:function(){this.el.attr("autocomplete","off").addClass("suggestions-input").css("box-sizing","border-box")},bindElementEvents:function(){this.el.on("keydown"+c,t.proxy(this.onElementKeyDown,this)),this.el.on(["keyup"+c,"cut"+c,"paste"+c,"input"+c].join(" "),t.proxy(this.onElementKeyUp,this)),this.el.on("blur"+c,t.proxy(this.onElementBlur,this)),this.el.on("focus"+c,t.proxy(this.onElementFocus,this))},unbindElementEvents:function(){this.el.off(c)},onElementBlur:function(){var t=this;t.cancelBlur?t.cancelBlur=!1:(t.options.triggerSelectOnBlur?t.isUnavailable()||t.selectCurrentValue({noSpace:!0}).always(function(){t.hide()}):t.hide(),t.fetchPhase.abort&&t.fetchPhase.abort())},onElementFocus:function(){this.cancelFocus||f.delay(t.proxy(this.completeOnFocus,this)),this.cancelFocus=!1},onElementKeyDown:function(t){var e=this;if(!e.isUnavailable())if(e.visible){switch(t.which){case s:e.el.val(e.currentValue),e.hide(),e.abortRequest();break;case i:if(!1===e.options.tabDisabled)return;break;case n:e.options.triggerSelectOnEnter&&e.selectCurrentValue();break;case o:return void(e.options.triggerSelectOnSpace&&e.isCursorAtEnd()&&(t.preventDefault(),e.selectCurrentValue({continueSelecting:!0,dontEnrich:!0}).fail(function(){e.currentValue+=" ",e.el.val(e.currentValue),e.proceedChangedValue()})));case a:e.moveUp();break;case r:e.moveDown();break;default:return}t.stopImmediatePropagation(),t.preventDefault()}else switch(t.which){case r:e.suggest();break;case n:e.options.triggerSelectOnEnter&&e.triggerOnSelectNothing()}},onElementKeyUp:function(t){if(!this.isUnavailable()){switch(t.which){case a:case r:case n:return}clearTimeout(this.onChangeTimeout),this.inputPhase.reject(),this.currentValue!==this.el.val()&&this.proceedChangedValue()}},proceedChangedValue:function(){var e=this;e.abortRequest(),e.inputPhase=t.Deferred().done(t.proxy(e.onValueChange,e)),e.options.deferRequestBy>0?e.onChangeTimeout=f.delay(function(){e.inputPhase.resolve()},e.options.deferRequestBy):e.inputPhase.resolve()},onValueChange:function(){var t;this.selection&&(t=this.selection,this.selection=null,this.trigger("InvalidateSelection",t)),this.selectedIndex=-1,this.update(),this.notify("valueChange")},completeOnFocus:function(){this.isUnavailable()||this.isElementFocused()&&(this.fixPosition(),this.update(),this.isMobile&&(this.setCursorAtEnd(),this.scrollToTop()))},isElementFocused:function(){return document.activeElement===this.element},isCursorAtEnd:function(){var t,e,n=this.el.val().length;try{if("number"==typeof(t=this.element.selectionStart))return t===n}catch(t){}return!document.selection||((e=document.selection.createRange()).moveStart("character",-n),n===e.text.length)},setCursorAtEnd:function(){var t=this.element;try{t.selectionEnd=t.selectionStart=t.value.length,t.scrollLeft=t.scrollWidth}catch(e){t.value=t.value}}},t.extend(b.prototype,v),g.on("initialize",v.bindElementEvents).on("dispose",v.unbindElementEvents),function(){var e={};function n(){t.each(e,function(){this.abort()}),e={}}n();var s={checkStatus:function(){var n=this,s=t.trim(n.options.token),i=n.options.type+s,o=e[i];function a(e){t.isFunction(n.options.onSearchError)&&n.options.onSearchError.call(n.element,null,o,"error",e)}o||(o=e[i]=t.ajax(n.getAjaxParams("status"))),o.done(function(e){e.search?t.extend(n.status,e):a("Service Unavailable")}).fail(function(){a(o.statusText)})}};b.resetTokens=n,t.extend(b.prototype,s),g.on("setOptions",s.checkStatus)}(),function(){if("GET"!=f.getDefaultType()){var e,n=!0,s={checkLocation:function(){var n=this,s=n.options.geoLocation;n.type.geoEnabled&&s&&(n.geoLocation=t.Deferred(),t.isPlainObject(s)||t.isArray(s)?n.geoLocation.resolve(s):(e||(e=t.ajax(n.getAjaxParams("detectAddressByIp"))),e.done(function(t){var e=t&&t.location&&t.location.data;e&&e.kladr_id?n.geoLocation.resolve(e):n.geoLocation.reject()}).fail(function(){n.geoLocation.reject()})))},getGeoLocation:function(){return this.geoLocation},constructParams:function(){var e={};return this.geoLocation&&t.isFunction(this.geoLocation.promise)&&"resolved"==this.geoLocation.state()&&this.geoLocation.done(function(n){e.locations_boost=t.makeArray(n)}),e}};t.extend(p,{geoLocation:n}),t.extend(b,{resetLocation:function(){e=null,b.defaultOptions.geoLocation=n}}),t.extend(b.prototype,{getGeoLocation:s.getGeoLocation}),g.on("setOptions",s.checkLocation).on("requestParams",s.constructParams)}}(),function(){var e={enrichSuggestion:function(e,n){var s=this,i=t.trim(s.options.token),o=t.Deferred();return!s.status.enrich||!s.type.enrichmentEnabled||!i||n&&n.dontEnrich?o.resolve(e):e.data&&null!=e.data.qc?o.resolve(e):(s.disableDropdown(),s.currentValue=e.value,s.enrichPhase=s.getSuggestions(e.value,{count:1},{noCallbacks:!0,useEnrichmentCache:!0}).always(function(){s.enableDropdown()}).done(function(t){var n=t&&t[0];o.resolve(n||e,!!n)}).fail(function(){o.resolve(e)}),o)},enrichResponse:function(e,n){var s=this.enrichmentCache[n];s&&t.each(e.suggestions,function(t,i){if(i.value===n)return e.suggestions[t]=s,!1})}};t.extend(b.prototype,e)}(),function(){var e={createContainer:function(){var e="."+this.classes.suggestion,n=this.options,s=t("<div/>").addClass(n.containerClass).css({position:"absolute",display:"none"});this.$container=s,s.on("click"+c,e,t.proxy(this.onSuggestionClick,this))},removeContainer:function(){this.options.floating&&this.$container.remove()},setContainerOptions:function(){this.$container.off("mousedown.suggestions"),this.options.floating&&this.$container.on("mousedown.suggestions",t.proxy(this.onMousedown,this))},onSuggestionClick:function(e){var n,s=t(e.target);if(!this.dropdownDisabled){for(;s.length&&!(n=s.attr("data-index"));)s=s.closest("."+this.classes.suggestion);n&&!isNaN(n)&&this.select(+n)}this.cancelFocus=!0,this.el.focus()},setDropdownPosition:function(t,e){var n,s=this;s.isMobile?n={left:t.left-e.left+"px",top:t.top+e.outerHeight+"px",width:s.$viewport.width()+"px"}:(n=s.options.floating?{left:e.left+"px",top:e.top+e.borderTop+e.innerHeight+"px"}:{left:t.left+"px",top:t.top+e.borderTop+e.innerHeight+"px"},f.delay(function(){var t=s.options.width;"auto"===t&&(t=s.el.outerWidth()),s.$container.outerWidth(t)})),s.$container.toggleClass(s.classes.mobile,s.isMobile).css(n),s.containerItemsPadding=e.left+e.borderLeft+e.paddingLeft},setItemsPositions:function(){this.getSuggestionsItems().css("paddingLeft",this.isMobile?this.containerItemsPadding+"px":"")},getSuggestionsItems:function(){return this.$container.children("."+this.classes.suggestion)},toggleDropdownEnabling:function(t){this.dropdownDisabled=!t,this.$container.attr("disabled",!t)},disableDropdown:function(){this.toggleDropdownEnabling(!1)},enableDropdown:function(){this.toggleDropdownEnabling(!0)},hasSuggestionsToChoose:function(){return this.suggestions.length>1||1===this.suggestions.length&&(!this.selection||t.trim(this.suggestions[0].value)!=t.trim(this.selection.value))},suggest:function(){if(this.hasSuggestionsToChoose()){var e=this,n=e.options,s=n.formatResult||e.type.formatResult||e.formatResult,i=n.beforeRender,o=[];!e.isMobile&&n.hint&&e.suggestions.length&&o.push('<div class="'+e.classes.hint+'">'+n.hint+"</div>"),e.selectedIndex=-1,t.each(e.suggestions,function(t,n){var i=e.makeSuggestionLabel(e.suggestions,n);n==e.selection&&(e.selectedIndex=t),o.push('<div class="'+e.classes.suggestion+'" data-index="'+t+'">'),o.push(s.call(e,n.value,e.currentValue,n,{unformattableTokens:e.type.unformattableTokens})),i&&o.push('<span class="'+e.classes.subtext_label+'">'+f.escapeHtml(i)+"</span>"),o.push("</div>")}),e.$container.html(o.join("")),n.autoSelectFirst&&-1===e.selectedIndex&&(e.selectedIndex=0),-1!==e.selectedIndex&&e.getSuggestionsItems().eq(e.selectedIndex).addClass(e.classes.selected),t.isFunction(i)&&i.call(e.element,e.$container),e.$container.show(),e.visible=!0,e.fixPosition(),e.setItemsPositions()}else this.hide()},wrapFormattedValue:function(t,e){var n=f.getDeepValue(e.data,"state.status");return'<span class="'+this.classes.value+'"'+(n?' data-suggestion-status="'+n+'"':"")+">"+t+"</span>"},formatResult:function(t,e,n,s){return t=this.highlightMatches(t,e,n,s),this.wrapFormattedValue(t,n)},highlightMatches:function(e,n,s,i){var o,a,r,u,c,l,d=[],p=i&&i.unformattableTokens,g=i&&i.maxLength,m=f.reWordExtractor();if(!e)return"";for(o=f.formatToken(n).split(h),o=f.withSubTokens(o),a=t.map(o,function(t){return new RegExp("^((.*)([\\-\\+\\/\\\\\\?!@#$%^&]+))?("+f.escapeRegExChars(t)+")([^\\-\\+\\/\\\\\\?!@#$%^&]*[\\-\\+\\/\\\\\\?!@#$%^&]*)","i")});(r=m.exec(e))&&r[0];)u=r[1],d.push({text:u,inUpperCase:u.toLowerCase()!==u,formatted:f.formatToken(u),matchable:!0}),r[2]&&d.push({text:r[2]});for(c=0;c<d.length;c++)!(l=d[c]).matchable||l.matched||-1!==t.inArray(l.formatted,p)&&!l.inUpperCase||t.each(a,function(t,e){var n,s=e.exec(l.formatted),i=c+1;if(s)return(s={before:s[1]||"",beforeText:s[2]||"",beforeDelimiter:s[3]||"",text:s[4]||"",after:s[5]||""}).before&&(d.splice(c,0,{text:l.text.substr(0,s.beforeText.length),formatted:s.beforeText,matchable:!0},{text:s.beforeDelimiter}),i+=2,n=s.before.length,l.text=l.text.substr(n),l.formatted=l.formatted.substr(n),c--),n=s.text.length+s.after.length,l.formatted.length>n&&(d.splice(i,0,{text:l.text.substr(n),formatted:l.formatted.substr(n),matchable:!0}),l.text=l.text.substr(0,n),l.formatted=l.formatted.substr(0,n)),s.after&&(n=s.text.length,d.splice(i,0,{text:l.text.substr(n),formatted:l.formatted.substr(n)}),l.text=l.text.substr(0,n),l.formatted=l.formatted.substr(0,n)),l.matched=!0,!1});if(g){for(c=0;c<d.length&&g>=0;c++)(g-=(l=d[c]).text.length)<0&&(l.text=l.text.substr(0,l.text.length+g)+"...");d.length=c}return function(e,n){var s=e.split(", ");return 1===s.length?e:t.map(s,function(t){return'<span class="'+n+'">'+t+"</span>"}).join(", ")}(function(e){return t.map(e,function(t){var e=f.escapeHtml(t.text);return e&&t.matched&&(e="<strong>"+e+"</strong>"),e}).join("")}(d),this.classes.nowrap)},makeSuggestionLabel:function(e,n){var s,i,o=this.type.fieldNames,a={},r=f.reWordExtractor(),u=[];if(o&&function(e,n){var s=!1;return t.each(e,function(t,e){if(s=e.value==n.value&&e!=n)return!1}),s}(e,n)&&n.data&&(t.each(o,function(t){var e=n.data[t];e&&(a[t]=f.formatToken(e))}),!t.isEmptyObject(a))){for(;(s=r.exec(f.formatToken(n.value)))&&(i=s[1]);)t.each(a,function(t,e){if(e==i)return u.push(o[t]),delete a[t],!1});if(u.length)return u.join(", ")}},hide:function(){this.visible=!1,this.selectedIndex=-1,this.$container.hide().empty()},activate:function(t){var e,n,s=this.classes.selected;return!this.dropdownDisabled&&((n=this.getSuggestionsItems()).removeClass(s),this.selectedIndex=t,-1!==this.selectedIndex&&n.length>this.selectedIndex)?((e=n.eq(this.selectedIndex)).addClass(s),e):null},deactivate:function(t){this.dropdownDisabled||(this.selectedIndex=-1,this.getSuggestionsItems().removeClass(this.classes.selected),t&&this.el.val(this.currentValue))},moveUp:function(){this.dropdownDisabled||(-1!==this.selectedIndex?0!==this.selectedIndex?this.adjustScroll(this.selectedIndex-1):this.deactivate(!0):this.suggestions.length&&this.adjustScroll(this.suggestions.length-1))},moveDown:function(){this.dropdownDisabled||(this.selectedIndex!==this.suggestions.length-1?this.adjustScroll(this.selectedIndex+1):this.deactivate(!0))},adjustScroll:function(t){var e,n,s,i=this.activate(t),o=this.$container.scrollTop();i&&i.length&&((e=i.position().top)<0?this.$container.scrollTop(o+e):(n=e+i.outerHeight())>(s=this.$container.innerHeight())&&this.$container.scrollTop(o-s+n),this.el.val(this.suggestions[t].value))}};t.extend(p,{width:"auto",floating:!1}),t.extend(b.prototype,e),g.on("initialize",e.createContainer).on("dispose",e.removeContainer).on("setOptions",e.setContainerOptions).on("fixPosition",e.setDropdownPosition).on("fixPosition",e.setItemsPositions).on("assignSuggestions",e.suggest)}(),function(){var e={NONE:"none",SPINNER:"spinner",CLEAR:"clear"},n=function(n){var s=t('<span class="suggestions-addon"/>');this.owner=n,this.$el=s,this.type=e.NONE,this.visible=!1,this.initialPadding=null,s.on("click",t.proxy(this,"onClick"))};n.prototype={checkType:function(){var n=this.owner.options.addon,s=!1;t.each(e,function(t,e){if(s=e==n)return!1}),s||(n=this.owner.isMobile?e.CLEAR:e.SPINNER),n!=this.type&&(this.type=n,this.$el.attr("data-addon-type",n),this.toggle(!0))},toggle:function(t){var n;switch(this.type){case e.CLEAR:n=!!this.owner.currentValue;break;case e.SPINNER:n=!!this.owner.currentRequest;break;default:n=!1}n!=this.visible&&(this.visible=n,n?this.show(t):this.hide(t))},show:function(t){var e=this,n={opacity:1};t?(e.$el.show().css(n),e.showBackground(!0)):e.$el.stop(!0,!0).delay(50).queue(function(){e.$el.show(),e.showBackground(),e.$el.dequeue()}).animate(n,"fast")},hide:function(t){var e=this,n={opacity:0};t&&e.$el.hide().css(n),e.$el.stop(!0).animate(n,{duration:"fast",complete:function(){e.$el.hide(),e.hideBackground()}})},fixPosition:function(t,e){var n=e.innerHeight;this.checkType(),this.$el.css({left:t.left+e.borderLeft+e.innerWidth-n+"px",top:t.top+e.borderTop+"px",height:n,width:n}),this.initialPadding=e.paddingRight,this.width=n,this.visible&&(e.componentsRight+=n)},showBackground:function(t){var e=this.owner.el,n={paddingRight:this.width};this.width>this.initialPadding&&(this.stopBackground(),t?e.css(n):e.animate(n,{duration:"fast",queue:"addon"}).dequeue("addon"))},hideBackground:function(t){var e=this.owner.el,n={paddingRight:this.initialPadding};this.width>this.initialPadding&&(this.stopBackground(!0),t?e.css(n):e.delay(1e3,"addon").animate(n,{duration:"fast",queue:"addon"}).dequeue("addon"))},stopBackground:function(t){this.owner.el.stop("addon",!0,t)},onClick:function(t){this.type==e.CLEAR&&this.owner.clear()}};var s=function(){var t=new n(this);this.$wrapper.append(t.$el),this.addon=t},i=function(t,e){this.addon.fixPosition(t,e)},o=function(){this.addon.checkType()},a=function(){this.addon.toggle()},r=function(){this.addon.stopBackground()};t.extend(p,{addon:null}),g.on("initialize",s).on("setOptions",o).on("fixPosition",i).on("clear",a).on("valueChange",a).on("request",a).on("resetPosition",r)}(),function(){var e=["kladr_id","postal_code","region","area","city","settlement","street"];function n(n){var s={};if(t.isPlainObject(n)&&t.each(n,function(t,n){n&&e.indexOf(t)>=0&&(s[t]=n)}),!t.isEmptyObject(s))return s.kladr_id?{kladr_id:s.kladr_id}:s}var s={createConstraints:function(){this.constraints={},this.$constraints=t('<ul class="suggestions-constraints"/>'),this.$wrapper.append(this.$constraints),this.$constraints.on("click","."+this.classes.removeConstraint,t.proxy(this.onConstraintRemoveClick,this))},setConstraintsPosition:function(t,e){this.$constraints.css({left:t.left+e.borderLeft+e.paddingLeft+"px",top:t.top+e.borderTop+Math.round((e.innerHeight-this.$constraints.height())/2)+"px"}),e.componentsLeft+=this.$constraints.outerWidth(!0)+e.paddingLeft},onConstraintRemoveClick:function(e){var n=this,s=t(e.target).closest("li"),i=s.attr("data-constraint-id");delete n.constraints[i],n.update(),s.fadeOut("fast",function(){n.removeConstraint(i)})},setupConstraints:function(){var e,n=this,s=n.options.constraints;s?s instanceof t||"string"==typeof s||"number"==typeof s.nodeType?(e=t(s)).is(n.constraints)||(n.unbindFromParent(),e.is(n.el)||(n.constraints=e,n.bindToParent())):(n._constraintsUpdating=!0,t.each(n.constraints,t.proxy(n.removeConstraint,n)),t.each(t.makeArray(s),function(t,e){n.addConstraint(e)}),n._constraintsUpdating=!1,n.fixPosition()):n.unbindFromParent()},formatConstraint:function(e){var s,i=this;if(e&&(e.locations||e.restrictions))return s=t.makeArray(e.locations||e.restrictions),null==e.label&&i.type.composeValue&&(e.label=t.map(s,function(t){return i.type.composeValue(t)}).join(", ")),e.locations=[],t.each(s,function(t,s){var i=n(s);i&&e.locations.push(i)}),e.locations.length?e:null},addConstraint:function(e){var n,s;(e=this.formatConstraint(e))&&(s=f.uniqueId("c"),this.constraints[s]=e,e.label&&(n=t("<li/>").append(t("<span/>").text(e.label)).attr("data-constraint-id",s),e.deletable&&n.append(t('<span class="suggestions-remove"/>')),this.$constraints.append(n),this._constraintsUpdating||this.fixPosition()))},removeConstraint:function(t){delete this.constraints[t],this.$constraints.children('[data-constraint-id="'+t+'"]').remove(),this._constraintsUpdating||this.fixPosition()},constructConstraintsParams:function(){for(var e,s,i=[],o=this.constraints,a={};o instanceof t&&(e=o.suggestions())&&!(s=f.getDeepValue(e,"selection.data"));)o=e.constraints;return o instanceof t?(s=n(s))&&(a.locations=[s],a.restrict_value=!0):(t.each(o,function(t,e){i=i.concat(e.locations)}),i.length&&(a.locations=i,a.restrict_value=this.options.restrict_value)),a},getFirstConstraintLabel:function(){var e=t.isPlainObject(this.constraints)&&Object.keys(this.constraints)[0];return e?this.constraints[e].label:""},bindToParent:function(){this.constraints.on(["suggestions-select."+this.uniqueId,"suggestions-invalidateselection."+this.uniqueId,"suggestions-clear."+this.uniqueId].join(" "),t.proxy(this.onParentSelectionChanged,this)).on("suggestions-dispose."+this.uniqueId,t.proxy(this.onParentDispose,this))},unbindFromParent:function(){var e=this.constraints;e instanceof t&&e.off("."+this.uniqueId)},onParentSelectionChanged:function(t,e,n){("suggestions-select"!==t.type||n)&&this.clear()},onParentDispose:function(t){this.unbindFromParent()},getParentInstance:function(){return this.constraints instanceof t&&this.constraints.suggestions()},shareWithParent:function(e){var n=this.getParentInstance();n&&n.type===this.type&&!function(e,n){var s=n.selection,i=s&&s.data&&n.bounds;return i&&t.each(n.bounds.all,function(t,n){return i=s.data[n]===e.data[n]}),i}(e,n)&&(n.shareWithParent(e),n.setSuggestion(e))}};t.extend(p,{constraints:null,restrict_value:!1}),t.extend(b.prototype,s),"GET"!=f.getDefaultType()&&g.on("initialize",s.createConstraints).on("setOptions",s.setupConstraints).on("fixPosition",s.setConstraintsPosition).on("requestParams",s.constructConstraintsParams).on("dispose",s.unbindFromParent)}(),function(){var e={proceedQuery:function(t){t.length>=this.options.minChars?this.updateSuggestions(t):this.hide()},selectCurrentValue:function(e){var n=this,s=t.Deferred();return n.inputPhase.resolve(),n.fetchPhase.done(function(){var t;n.selection&&!n.visible?s.reject():(t=n.findSuggestionIndex(),n.select(t,e),-1===t?s.reject():s.resolve(t))}).fail(function(){s.reject()}),s},findSuggestionIndex:function(){var e,n=this,s=n.selectedIndex;return-1===s&&(e=t.trim(n.el.val()))&&t.each(n.type.matchers,function(t,i){return-1===(s=i(e,n.suggestions))}),s},select:function(e,n){var s=this,i=s.suggestions[e],o=n&&n.continueSelecting,a=s.currentValue;if(!s.triggering.Select)return i?void s.enrichSuggestion(i,n).done(function(i,o){s.selectSuggestion(i,e,a,t.extend({hasBeenEnriched:o},n))}):(o||s.selection||s.triggerOnSelectNothing(),void s.onSelectComplete(o))},selectSuggestion:function(t,e,n,s){var i=s.continueSelecting,o=!this.type.isDataComplete||this.type.isDataComplete.call(this,t),a=this.selection;this.triggering.Select||(this.type.alwaysContinueSelecting&&(i=!0),o&&(i=!1),s.hasBeenEnriched&&(this.suggestions[e]=t),this.checkValueBounds(t),this.currentValue=this.getSuggestionValue(t),!this.currentValue||s.noSpace||o||(this.currentValue+=" "),this.el.val(this.currentValue),this.currentValue?(this.selection=t,this.areSuggestionsSame(t,a)||this.trigger("Select",t,this.currentValue!=n),this.onSelectComplete(i)):(this.selection=null,this.triggerOnSelectNothing()),this.shareWithParent(t))},onSelectComplete:function(t){t?(this.selectedIndex=-1,this.updateSuggestions(this.currentValue)):this.hide()},triggerOnSelectNothing:function(){this.triggering.SelectNothing||this.trigger("SelectNothing",this.currentValue)},trigger:function(e){var n=f.slice(arguments,1),s=this.options["on"+e];this.triggering[e]=!0,t.isFunction(s)&&s.apply(this.element,n),this.el.trigger.call(this.el,"suggestions-"+e.toLowerCase(),n),this.triggering[e]=!1}};t.extend(b.prototype,e)}(),function(){var e={region:{digits:2,zeros:11},area:{digits:5,zeros:8},city:{digits:8,zeros:5},settlement:{digits:11,zeros:2},street:{digits:15,zeros:2},house:{digits:19}},n={setupBounds:function(){this.bounds={from:null,to:null}},setBoundsOptions:function(){var e,n,s=this.type.boundsAvailable,i=t.trim(this.options.bounds).split("-"),o=i[0],a=i[i.length-1],r=[],u=[];-1===t.inArray(o,s)&&(o=null),-1!==(n=t.inArray(a,s))&&n!==s.length-1||(a=null),(o||a)&&(e=!o,t.each(s,function(t,n){if(n==o&&(e=!0),u.push(n),e&&r.push(n),n==a)return!1})),this.bounds.from=o,this.bounds.to=a,this.bounds.all=u,this.bounds.own=r},constructBoundsParams:function(){var t={};return this.bounds.from&&(t.from_bound={value:this.bounds.from}),this.bounds.to&&(t.to_bound={value:this.bounds.to}),t},checkValueBounds:function(t){var e;this.bounds.own.length&&this.type.composeValue&&(e=this.copyBoundedData(t.data,this.bounds.own),t.value=this.type.composeValue(e))},copyBoundedData:function(e,n){var s={},i=this.type.boundsFields;return i&&t.each(n,function(n,o){var a=i[o];a&&t.each(a,function(t,n){null!=e[n]&&(s[n]=e[n])})}),s},getBoundedKladrId:function(t,n){var s=n[n.length-1],i=e[s],o=t.substr(0,i.digits);return i.zeros&&(o+=new Array(i.zeros+1).join("0")),o}};t.extend(p,{bounds:null}),t.extend(t.Suggestions.prototype,n),g.on("initialize",n.setupBounds).on("setOptions",n.setBoundsOptions).on("requestParams",n.constructBoundsParams)}(),t.fn.suggestions=function(e,n){return 0===arguments.length?this.first().data("suggestions"):this.each(function(){var s=t(this),i=s.data("suggestions");"string"==typeof e?i&&"function"==typeof i[e]&&i[e](n):(i&&i.dispose&&i.dispose(),i=new b(this,e),s.data("suggestions",i))})}});